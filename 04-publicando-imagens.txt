$ ## PUBLICANDO IMAGENS NO DOCKERHUB ##
$ # Copiando hml para a raiz do nginx
$ # Definindo comandos para subir nginx
$ # Criando e executando imagem
$ # Criar conta no dockerhub
$ # Logar no dockerhub e subir imagem
$ # Dockerhub remove as imagens não utilizadas por mais de 90 dias

> ## CRIANDO E EXECUTANDO IMAGENS ##
> podman build -t villanileo/webserver .
Error: stat /home/villani/Dockerfile: no such file or directory
> pwd
/home/villani
> ls
revisao-docker
> cd revisao-docker/
> ls
01-comandos-docker.txt  02-volumes-docker.txt  03-criando-imagens.txt  04-publicanco-imagens.txt  Dockerfile  README.md  html
> podman build -t villanileo/webserver .
STEP 1/6: FROM nginx:latest
Error: error creating build container: short-name "nginx:latest" did not resolve to an alias and no unqualified-search registries are defined in "/etc/containers/registries.conf"
> podman build -t villanileo/webserver .
STEP 1/6: FROM nginx:latest
Error: error creating build container: short-name "nginx:latest" did not resolve to an alias and no unqualified-search registries are defined in "/etc/containers/registries.conf"
> podman build -t villanileo/webserver .
STEP 1/6: FROM nginx
Error: error creating build container: short-name "nginx" did not resolve to an alias and no unqualified-search registries are defined in "/etc/containers/registries.conf"
>
> podman images
REPOSITORY                     TAG         IMAGE ID      CREATED        SIZE
docker.io/library/ubuntu       latest      b1e9cef3f297  5 weeks ago    80.6 MB
docker.io/library/hello-world  latest      d2c94e258dcb  17 months ago  28.5 kB
> podman image
Error: missing command 'podman image COMMAND'
Try 'podman image --help' for more information.
> podman image --help
Manage images

Description:
  Manage images

Usage:
  podman image [command]

Available Commands:
  build       Build an image using instructions from Containerfiles
  diff        Inspect changes to the image's file systems
  exists      Check if an image exists in local storage
  history     Show history of a specified image
  import      Import a tarball to create a filesystem image
  inspect     Display the configuration of an image
  list        List images in local storage
  load        Load image(s) from a tar archive
  mount       Mount an image's root filesystem
  prune       Remove unused images
  pull        Pull an image from a registry
  push        Push an image to a specified destination
  rm          Removes one or more images from local storage
  save        Save image(s) to an archive
  scp         securely copy images
  search      Search registry for image
  sign        Sign an image
  tag         Add an additional name to a local image
  tree        Prints layer hierarchy of an image in a tree format
  trust       Manage container image trust policy
  unmount     Unmount an image's root filesystem
  untag       Remove a name from a local image

> podman image pull nginx
Error: short-name "nginx" did not resolve to an alias and no unqualified-search registries are defined in "/etc/containers/registries.conf"
> podman images
REPOSITORY                     TAG         IMAGE ID      CREATED        SIZE
docker.io/library/ubuntu       latest      b1e9cef3f297  5 weeks ago    80.6 MB
docker.io/library/hello-world  latest      d2c94e258dcb  17 months ago  28.5 kB
> podman image pull docker.io/library/nginx
Trying to pull docker.io/library/nginx:latest...
Getting image source signatures
Copying blob d07412f52e9d done
Copying blob 5b8e768fb22d done
Copying blob 9ab66c386e9c done
Copying blob 4b563e5e980a done
Copying blob 55af3c8febf2 done
Copying blob 302e3ee49805 done
Copying blob 85177e2c6f39 done
Copying config 7f553e8bbc done
Writing manifest to image destination
Storing signatures
7f553e8bbc897571642d836b31eaf6ecbe395d7641c2b24291356ed28f3f2bd0
> podman images
REPOSITORY                     TAG         IMAGE ID      CREATED        SIZE
docker.io/library/nginx        latest      7f553e8bbc89  5 days ago     196 MB
docker.io/library/ubuntu       latest      b1e9cef3f297  5 weeks ago    80.6 MB
docker.io/library/hello-world  latest      d2c94e258dcb  17 months ago  28.5 kB
> podman build -t villanileo/webserver .
STEP 1/6: FROM docker.io/library/nginx:latest
STEP 2/6: RUN apt update &&     apt install vim

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]
Get:2 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]
Get:3 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 Packages [8787 kB]
Get:5 http://deb.debian.org/debian bookworm-updates/main amd64 Packages [2468 B]
Get:6 http://deb.debian.org/debian-security bookworm-security/main amd64 Packages [188 kB]
Fetched 9232 kB in 6s (1476 kB/s)
Reading package lists...
Building dependency tree...
Reading state information...
All packages are up to date.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  libgpm2 libsodium23 vim-common vim-runtime xxd
Suggested packages:
  gpm ctags vim-doc vim-scripts
The following NEW packages will be installed:
  libgpm2 libsodium23 vim vim-common vim-runtime xxd
0 upgraded, 6 newly installed, 0 to remove and 0 not upgraded.
Need to get 8976 kB of archives.
After this operation, 41.9 MB of additional disk space will be used.
Do you want to continue? [Y/n] Abort.
Error: error building at STEP "RUN apt update &&     apt install vim": error while running runtime: exit status 1
> podman build -t villanileo/webserver .
STEP 1/6: FROM docker.io/library/nginx:latest
STEP 2/6: RUN apt update &&     apt install -y vim

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]
Get:2 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]
Get:3 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 Packages [8787 kB]
Get:5 http://deb.debian.org/debian bookworm-updates/main amd64 Packages [2468 B]
Get:6 http://deb.debian.org/debian-security bookworm-security/main amd64 Packages [188 kB]
Fetched 9232 kB in 10s (925 kB/s)
Reading package lists...
Building dependency tree...
Reading state information...
All packages are up to date.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  libgpm2 libsodium23 vim-common vim-runtime xxd
Suggested packages:
  gpm ctags vim-doc vim-scripts
The following NEW packages will be installed:
  libgpm2 libsodium23 vim vim-common vim-runtime xxd
0 upgraded, 6 newly installed, 0 to remove and 0 not upgraded.
Need to get 8976 kB of archives.
After this operation, 41.9 MB of additional disk space will be used.
Get:1 http://deb.debian.org/debian bookworm/main amd64 vim-common all 2:9.0.1378-2 [124 kB]
Get:2 http://deb.debian.org/debian bookworm/main amd64 libgpm2 amd64 1.20.7-10+b1 [14.2 kB]
Get:3 http://deb.debian.org/debian bookworm/main amd64 libsodium23 amd64 1.0.18-1 [161 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 vim-runtime all 2:9.0.1378-2 [7025 kB]
Get:5 http://deb.debian.org/debian bookworm/main amd64 vim amd64 2:9.0.1378-2 [1567 kB]
Get:6 http://deb.debian.org/debian bookworm/main amd64 xxd amd64 2:9.0.1378-2 [83.7 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 8976 kB in 7s (1349 kB/s)
Selecting previously unselected package vim-common.
(Reading database ... 7580 files and directories currently installed.)
Preparing to unpack .../0-vim-common_2%3a9.0.1378-2_all.deb ...
Unpacking vim-common (2:9.0.1378-2) ...
Selecting previously unselected package libgpm2:amd64.
Preparing to unpack .../1-libgpm2_1.20.7-10+b1_amd64.deb ...
Unpacking libgpm2:amd64 (1.20.7-10+b1) ...
Selecting previously unselected package libsodium23:amd64.
Preparing to unpack .../2-libsodium23_1.0.18-1_amd64.deb ...
Unpacking libsodium23:amd64 (1.0.18-1) ...
Selecting previously unselected package vim-runtime.
Preparing to unpack .../3-vim-runtime_2%3a9.0.1378-2_all.deb ...
Adding 'diversion of /usr/share/vim/vim90/doc/help.txt to /usr/share/vim/vim90/doc/help.txt.vim-tiny by vim-runtime'
Adding 'diversion of /usr/share/vim/vim90/doc/tags to /usr/share/vim/vim90/doc/tags.vim-tiny by vim-runtime'
Unpacking vim-runtime (2:9.0.1378-2) ...
Selecting previously unselected package vim.
Preparing to unpack .../4-vim_2%3a9.0.1378-2_amd64.deb ...
Unpacking vim (2:9.0.1378-2) ...
Selecting previously unselected package xxd.
Preparing to unpack .../5-xxd_2%3a9.0.1378-2_amd64.deb ...
Unpacking xxd (2:9.0.1378-2) ...
Setting up libsodium23:amd64 (1.0.18-1) ...
Setting up libgpm2:amd64 (1.20.7-10+b1) ...
Setting up xxd (2:9.0.1378-2) ...
Setting up vim-common (2:9.0.1378-2) ...
Setting up vim-runtime (2:9.0.1378-2) ...
Setting up vim (2:9.0.1378-2) ...
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/editor (editor) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/editor.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/editor.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/editor.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/editor.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/editor.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/editor.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/editor.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/editor.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/editor.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/ex (ex) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/ex.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/ex.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/ex.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/ex.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/ex.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/ex.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/ex.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/ex.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/ex.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rview (rview) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rvim (rvim) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vi (vi) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/vi.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/vi.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/vi.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/vi.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/vi.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/vi.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/vi.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/vi.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/vi.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/view (view) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/view.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/view.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/view.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/view.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/view.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/view.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/view.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/view.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/view.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vim (vim) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vimdiff (vimdiff) in auto mode
Processing triggers for libc-bin (2.36-9+deb12u8) ...
--> 17b6d23feb4
STEP 3/6: WORKDIR /app
--> 5a91b18de2c
STEP 4/6: COPY html /usr/share/nginx/html
--> 02cea814f40
STEP 5/6: ENTRYPOINT ["/docker-entrypoint.sh"]
--> fcfddd98900
STEP 6/6: CMD ["nginx", "-g", "daemon off;"]
COMMIT villanileo/webserver
--> ca3a0086040
Successfully tagged localhost/villanileo/webserver:latest
ca3a0086040704036e175ed676f59d96d0bf8c0a5466f149441188017d0fd09b
> 
> podman images
REPOSITORY                      TAG         IMAGE ID      CREATED         SIZE
localhost/villanileo/webserver  latest      ca3a00860407  14 seconds ago  259 MB
docker.io/library/nginx         latest      7f553e8bbc89  5 days ago      196 MB
docker.io/library/ubuntu        latest      b1e9cef3f297  5 weeks ago     80.6 MB
docker.io/library/hello-world   latest      d2c94e258dcb  17 months ago   28.5 kB
> 
> # Colocando imagens em execução
> podman run webserver
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
2024/10/08 11:49:15 [notice] 1#1: using the "epoll" event method
2024/10/08 11:49:15 [notice] 1#1: nginx/1.27.2
2024/10/08 11:49:15 [notice] 1#1: built by gcc 12.2.0 (Debian 12.2.0-14)
2024/10/08 11:49:15 [notice] 1#1: OS: Linux 5.15.153.1-microsoft-standard-WSL2
2024/10/08 11:49:15 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576
2024/10/08 11:49:15 [notice] 1#1: start worker processes
2024/10/08 11:49:15 [notice] 1#1: start worker process 24
2024/10/08 11:49:15 [notice] 1#1: start worker process 25
2024/10/08 11:49:15 [notice] 1#1: start worker process 26
2024/10/08 11:49:15 [notice] 1#1: start worker process 27
^C2024/10/08 11:49:25 [notice] 1#1: signal 2 (SIGINT) received, exiting
2024/10/08 11:49:25 [notice] 25#25: exiting
2024/10/08 11:49:25 [notice] 24#24: exiting
2024/10/08 11:49:25 [notice] 25#25: exit
2024/10/08 11:49:25 [notice] 24#24: exit
2024/10/08 11:49:25 [notice] 26#26: exiting
2024/10/08 11:49:25 [notice] 27#27: exiting
2024/10/08 11:49:25 [notice] 27#27: exit
2024/10/08 11:49:25 [notice] 26#26: exit
2024/10/08 11:49:25 [notice] 1#1: signal 14 (SIGALRM) received
2024/10/08 11:49:25 [notice] 1#1: signal 17 (SIGCHLD) received from 26
2024/10/08 11:49:25 [notice] 1#1: worker process 26 exited with code 0
2024/10/08 11:49:25 [notice] 1#1: worker process 27 exited with code 0
2024/10/08 11:49:25 [notice] 1#1: signal 29 (SIGIO) received
2024/10/08 11:49:25 [notice] 1#1: signal 17 (SIGCHLD) received from 27
2024/10/08 11:49:25 [notice] 1#1: signal 17 (SIGCHLD) received from 24
2024/10/08 11:49:25 [notice] 1#1: worker process 24 exited with code 0
2024/10/08 11:49:25 [notice] 1#1: signal 29 (SIGIO) received
2024/10/08 11:49:25 [notice] 1#1: signal 17 (SIGCHLD) received from 25
2024/10/08 11:49:25 [notice] 1#1: worker process 25 exited with code 0
2024/10/08 11:49:25 [notice] 1#1: exit
> podman ps
CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
> podman ps -a
CONTAINER ID  IMAGE                                  COMMAND               CREATED         STATUS                     PORTS       NAMES
ed7d28faabdb  docker.io/library/hello-world:latest   /hello                13 days ago     Exited (0) 13 days ago                 boring_kepler
c659981e02e1  docker.io/library/ubuntu:latest        bash                  12 days ago     Exited (137) 12 days ago               musing_gates    
ac0ddd457010  docker.io/library/ubuntu:latest        bash                  12 days ago     Exited (0) 12 days ago                 hardcore_napier 
99e8c3ac0773  localhost/villanileo/webserver:latest  nginx -g daemon o...  43 seconds ago  Exited (0) 33 seconds ago              suspicious_curie> podman run -it -p 8080:80 --name webserver webserver
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
2024/10/08 11:50:55 [notice] 1#1: using the "epoll" event method
2024/10/08 11:50:55 [notice] 1#1: nginx/1.27.2
2024/10/08 11:50:55 [notice] 1#1: built by gcc 12.2.0 (Debian 12.2.0-14)
2024/10/08 11:50:55 [notice] 1#1: OS: Linux 5.15.153.1-microsoft-standard-WSL2
2024/10/08 11:50:55 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576
2024/10/08 11:50:55 [notice] 1#1: start worker processes
2024/10/08 11:50:55 [notice] 1#1: start worker process 24
2024/10/08 11:50:55 [notice] 1#1: start worker process 25
2024/10/08 11:50:55 [notice] 1#1: start worker process 26
2024/10/08 11:50:55 [notice] 1#1: start worker process 27
^C2024/10/08 11:51:01 [notice] 27#27: signal 2 (SIGINT) received, exiting
2024/10/08 11:51:01 [notice] 26#26: signal 2 (SIGINT) received, exiting
2024/10/08 11:51:01 [notice] 27#27: exiting
2024/10/08 11:51:01 [notice] 26#26: exiting
2024/10/08 11:51:01 [notice] 24#24: signal 2 (SIGINT) received, exiting
2024/10/08 11:51:01 [notice] 25#25: signal 2 (SIGINT) received, exiting
2024/10/08 11:51:01 [notice] 25#25: exiting
2024/10/08 11:51:01 [notice] 24#24: exiting
2024/10/08 11:51:01 [notice] 27#27: exit
2024/10/08 11:51:01 [notice] 26#26: exit
2024/10/08 11:51:01 [notice] 25#25: exit
2024/10/08 11:51:01 [notice] 24#24: exit
2024/10/08 11:51:01 [notice] 1#1: signal 2 (SIGINT) received, exiting
2024/10/08 11:51:01 [notice] 1#1: signal 14 (SIGALRM) received
2024/10/08 11:51:01 [notice] 1#1: signal 17 (SIGCHLD) received from 26
2024/10/08 11:51:01 [notice] 1#1: worker process 24 exited with code 0
2024/10/08 11:51:01 [notice] 1#1: worker process 26 exited with code 0
2024/10/08 11:51:01 [notice] 1#1: worker process 27 exited with code 0
2024/10/08 11:51:01 [notice] 1#1: signal 29 (SIGIO) received
2024/10/08 11:51:01 [notice] 1#1: signal 17 (SIGCHLD) received from 24
2024/10/08 11:51:01 [notice] 1#1: signal 17 (SIGCHLD) received from 25
2024/10/08 11:51:01 [notice] 1#1: worker process 25 exited with code 0
2024/10/08 11:51:01 [notice] 1#1: exit
> podman run -d -p 8080:80 --name webserver webserver
Error: error creating container storage: the container name "webserver" is already in use by "73f853f9135e2bbc9c856d19f8dcce516abc5c677288947241a0e10d55c6c0b4". You have to remove that container to be able to reuse that name.: that name is already in use
> podman ps -a
CONTAINER ID  IMAGE                                  COMMAND               CREATED         STATUS                         PORTS                 NAMES
ed7d28faabdb  docker.io/library/hello-world:latest   /hello                13 days ago     Exited (0) 13 days ago                               boring_kepler
c659981e02e1  docker.io/library/ubuntu:latest        bash                  12 days ago     Exited (137) 12 days ago                             musing_gates
ac0ddd457010  docker.io/library/ubuntu:latest        bash                  12 days ago     Exited (0) 12 days ago                               hardcore_napier
99e8c3ac0773  localhost/villanileo/webserver:latest  nginx -g daemon o...  2 minutes ago   Exited (0) About a minute ago                        suspicious_curie
73f853f9135e  localhost/villanileo/webserver:latest  nginx -g daemon o...  24 seconds ago  Exited (0) 18 seconds ago      0.0.0.0:8080->80/tcp  webserver
>
> # Removendo containers já executados
> podman rm webserver 
73f853f9135e2bbc9c856d19f8dcce516abc5c677288947241a0e10d55c6c0b4
> podman ps -a
CONTAINER ID  IMAGE                                  COMMAND               CREATED        STATUS                    PORTS       NAMES
ed7d28faabdb  docker.io/library/hello-world:latest   /hello                13 days ago    Exited (0) 13 days ago                boring_kepler
c659981e02e1  docker.io/library/ubuntu:latest        bash                  13 days ago    Exited (137) 12 days ago              musing_gates
ac0ddd457010  docker.io/library/ubuntu:latest        bash                  12 days ago    Exited (0) 12 days ago                hardcore_napier
99e8c3ac0773  localhost/villanileo/webserver:latest  nginx -g daemon o...  3 minutes ago  Exited (0) 3 minutes ago              suspicious_curie
>
> podman run -d -p 8080:80 --name webserver webserver
Error: rootlessport listen tcp 0.0.0.0:8080: bind: address already in use
>
> podman ps
CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
>
> podman ps -a
ac0ddd457010  docker.io/library/ubuntu:latest        bash                  12 days ago     Exited (0) 12 days ago                          hardcore_napier                                                                                                                                          kepler
99e8c3ac0773  localhost/villanileo/webserver:latest  nginx -g daemon o...  3 minutes ago   Exited (0) 3 minutes ago                        suspicigatesous_curie                                                                                                                                         e_napier
89e4a5b8c168  localhost/villanileo/webserver:latest  nginx -g daemon o...  17 seconds ago  Created                   0.0.0.0:8080->80/tcp  webservous_curieer                                                                                                                                                er
>
> podman rm webserver
89e4a5b8c1682cfd2128ddc06406c4e84aefe44078119f5960b18099f0ba1f63
>
> podman run -d -p 8082:80 --name webserver webserver
d262bd5bcae0edfe052d7ba1f379bb787cf8586fe67321356efba8e19f84411e
>
> podman ps
CONTAINER ID  IMAGE                                  COMMAND               CREATED        STATUS            PORTS                 NAMES
d262bd5bcae0  localhost/villanileo/webserver:latest  nginx -g daemon o...  6 seconds ago  Up 6 seconds ago  0.0.0.0:8082->80/tcp  webserver       
>
> # Entrando no container e executando um comando
> podman exec -it webserver bash
root@d262bd5bcae0:/app# # Dentro da pasta definida no workdir
root@d262bd5bcae0:/app#
root@d262bd5bcae0:/app# # Testando o vim
root@d262bd5bcae0:/app# vim
root@d262bd5bcae0:/app#
root@d262bd5bcae0:/app# # Saindo do container
root@d262bd5bcae0:/app# exit
exit
>
> # De volta no host
>
# # wildcarded format: "*.example.com". In this case, the input reference will
# # be used as-is without any rewrite.
# location = internal-registry-for-example.com/bar"
#
# # (Possibly-partial) mirrors for the "prefix"-rooted namespace.
# #
# # The mirrors are attempted in the specified order; the first one that can be
# # contacted and contains the image will be used (and if none of the mirrors contains the image,
# # the primary location specified by the "registry.location" field, or using the unmodified
# # user-specified reference, is tried last).
# #
# # Each TOML table in the "mirror" array can contain the following fields, with the same semantics
# # as if specified in the [[registry]] TOML table directly:
# # - location
# # - insecure
# [[registry.mirror]]
# location = "example-mirror-0.local/mirror-for-foo"
# [[registry.mirror]]
# location = "example-mirror-1.local/mirrors/foo"
# insecure = true
# # Given the above, a pull of example.com/foo/image:latest will try:
# # 1. example-mirror-0.local/mirror-for-foo/image:latest
# # 2. example-mirror-1.local/mirrors/foo/image:latest
# # 3. internal-registry-for-example.net/bar/image:latest
# # in order, and use the first one that exists.
[[registry]]
location = "docker.io"
insecure = true
# [[registry.mirror]]
> podman login
Error: no registries found in registries.conf, a registry must be provided
>
> # Configurando os Registries do Podman
> vim /etc/containers/registries.conf
> vim /etc/containers/registries.conf
> sudo vim /etc/containers/registries.conf
[sudo] password for villani:
>
> # Reiniciando o podman
> sudo systemctl restart podman
> 
> # Testando alteração do registries
> podman image pull nginx:1.26.2-alpine-slim
Error: short-name "nginx:1.26.2-alpine-slim" did not resolve to an alias and no unqualified-search registries are defined in "/etc/containers/registries.conf"
> 
> cat /etc/con
console-setup/ containers/    
> cat /etc/con
console-setup/ containers/    
> cat /etc/containers/registries.conf
# For more information on this configuration file, see containers-registries.conf(5).
#
# NOTE: RISK OF USING UNQUALIFIED IMAGE NAMES
# We recommend always using fully qualified image names including the registry
# server (full dns name), namespace, image name, and tag
# (e.g., registry.redhat.io/ubi8/ubi:latest). Pulling by digest (i.e.,
# quay.io/repository/name@digest) further eliminates the ambiguity of tags.
# When using short names, there is always an inherent risk that the image being
# pulled could be spoofed. For example, a user wants to pull an image named
# `foobar` from a registry and expects it to come from myregistry.com. If
# myregistry.com is not first in the search list, an attacker could place a
# different `foobar` image at a registry earlier in the search list. The user
# would accidentally pull and run the attacker's image and code rather than the
# intended content. We recommend only adding registries which are completely
# trusted (i.e., registries which don't allow unknown or anonymous users to
# create accounts with arbitrary names). This will prevent an image from being
# spoofed, squatted or otherwise made insecure.  If it is necessary to use one
# of these registries, it should be added at the end of the list.
#
# # An array of host[:port] registries to try when pulling an unqualified image, in order.
# unqualified-search-registries = ["example.com"]
#
# [[registry]]
# # The "prefix" field is used to choose the relevant [[registry]] TOML table;
# # (only) the TOML table with the longest match for the input image name
# # (taking into account namespace/repo/tag/digest separators) is used.
# #
# # The prefix can also be of the form: *.example.com for wildcard subdomain
# # matching.
# #
# # If the prefix field is missing, it defaults to be the same as the "location" field.
# prefix = "example.com/foo"
#
# # If true, unencrypted HTTP as well as TLS connections with untrusted
# # certificates are allowed.
# insecure = false
#
# # If true, pulling images with matching names is forbidden.
# blocked = false
#
# # The physical location of the "prefix"-rooted namespace.
# #
# # By default, this is equal to "prefix" (in which case "prefix" can be omitted
# # and the [[registry]] TOML table can only specify "location").
# #
# # Example: Given
# #   prefix = "example.com/foo"
# #   location = "internal-registry-for-example.net/bar"
# # requests for the image example.com/foo/myimage:latest will actually work with the
# # internal-registry-for-example.net/bar/myimage:latest image.
#
# # The location can be empty iff prefix is in a
# # wildcarded format: "*.example.com". In this case, the input reference will
# # be used as-is without any rewrite.
# location = internal-registry-for-example.com/bar"
#
# # (Possibly-partial) mirrors for the "prefix"-rooted namespace.
# #
# # The mirrors are attempted in the specified order; the first one that can be
# # contacted and contains the image will be used (and if none of the mirrors contains the image,
# # the primary location specified by the "registry.location" field, or using the unmodified
# # user-specified reference, is tried last).
# #
# # Each TOML table in the "mirror" array can contain the following fields, with the same semantics
# # as if specified in the [[registry]] TOML table directly:
# # - location
# # - insecure
# [[registry.mirror]]
# location = "example-mirror-0.local/mirror-for-foo"
# [[registry.mirror]]
# location = "example-mirror-1.local/mirrors/foo"
# insecure = true
# # Given the above, a pull of example.com/foo/image:latest will try:
# [[registry.mirror]]
# # 1. example-mirror-0.local/mirror-for-foo/image:latest
# # 2. example-mirror-1.local/mirrors/foo/image:latest
# # 3. internal-registry-for-example.net/bar/image:latest
# # in order, and use the first one that exists.
[[registry]]
location = "docker.io"
insecure = true

[[registry]]
location = "quay.io"
insecure = true

[[registry]]
location = "ghcr.io"
insecure = true
>
> podman search nginx
>
> sudo vim /etc/containers/registries.conf
>
> sudo systemctl restart podman
> 
> podman search nginx
INDEX       NAME                                                            DESCRIPTION                                      STARS       OFFICIAL    AUTOMATED
docker.io   docker.io/library/nginx                                         Official build of Nginx.                         20260       [OK]
docker.io   docker.io/nginx/nginx-ingress                                   NGINX and  NGINX Plus Ingress Controllers fo...  94
docker.io   docker.io/nginx/nginx-prometheus-exporter                       NGINX Prometheus Exporter for NGINX and NGIN...  43
docker.io   docker.io/nginx/unit                                            This repository is retired, use the Docker o...  63
docker.io   docker.io/nginx/nginx-ingress-operator                          NGINX Ingress Operator for NGINX and NGINX P...  2
docker.io   docker.io/nginx/nginx-quic-qns                                  NGINX QUIC interop                               1
docker.io   docker.io/nginx/unit-preview                                    Unit preview features                            0
docker.io   docker.io/bitnami/nginx                                         Bitnami container image for NGINX                193                     [OK]
docker.io   docker.io/linuxserver/nginx                                     An Nginx container, brought to you by LinuxS...  219
docker.io   docker.io/ubuntu/nginx                                          Nginx, a high-performance reverse proxy & we...  119
docker.io   docker.io/kasmweb/nginx                                         An Nginx image based off nginx:alpine and in...  8
docker.io   docker.io/rancher/nginx                                                                                          2
docker.io   docker.io/nginx/nginxaas-loadbalancer-kubernetes                                                                 0
docker.io   docker.io/redash/nginx                                          Pre-configured nginx to proxy linked contain...  2
docker.io   docker.io/nginx/nginxaas-operator                                                                                0
docker.io   docker.io/youstin/nginx                                                                                          0
docker.io   docker.io/bitnamicharts/nginx                                                                                    0
docker.io   docker.io/paketobuildpacks/nginx                                                                                 0
docker.io   docker.io/rapidfort/nginx                                       RapidFort optimized, hardened image for NGIN...  15
docker.io   docker.io/wodby/nginx                                           Generic nginx                                    2                       [OK]
docker.io   docker.io/bitwarden/nginx                                       The Bitwarden nginx web server acting as a r...  13
docker.io   docker.io/starojanje/nginx                                                                                       0
docker.io   docker.io/rasa/nginx                                            Rasa X nginx server                              2
docker.io   docker.io/gluufederation/nginx                                   A customized NGINX image containing a consu...  1
docker.io   docker.io/arm64v8/nginx                                         Official build of Nginx.                         50
quay.io     quay.io/kubernetes-ingress-controller/nginx-ingress-controller  NGINX Ingress controller built around the [K...  0
quay.io     quay.io/openshift-scale/nginx                                                                                    0
quay.io     quay.io/dtan4/nginx-basic-auth-proxy                                                                             0
quay.io     quay.io/ukhomeofficedigital/nginx-proxy                         # OpenResty Docker Container  [![Build Statu...  0
quay.io     quay.io/nginx/nginx-ingress                                                                                      0
quay.io     quay.io/cloud-bulldozer/nginx                                                                                    0
quay.io     quay.io/olmqe/nginxolm-operator-bundle                                                                           0
quay.io     quay.io/centos7/nginx-116-centos7                               **This image is no longer being rebuilt. The...  0
quay.io     quay.io/redhattraining/hello-world-nginx                                                                         0
quay.io     quay.io/martinhelmich/prometheus-nginxlog-exporter              Export metrics from Nginx access log files t...  0
quay.io     quay.io/olmqe/nginxolm-operator-index                                                                            0
 [![Docker Pulls](https://img.shie...  0                                    # Nginx
quay.io     quay.io/telco5gci/nginx                                                                                          0
quay.io     quay.io/openshifttest/nginx-alpine                                                                               0
quay.io     quay.io/olmqe/nginx-ok-index                                                                                     0
quay.io     quay.io/nginx/nginx-unprivileged                                                                                 0
quay.io     quay.io/astronomer/ap-nginx                                                                                      0
quay.io     quay.io/astronomer/ap-nginx-es                                                                                   0
quay.io     quay.io/openshifttest/nginxolm-operator-index                                                                    0
quay.io     quay.io/olmqe/nginx-operator-base                                                                                0
quay.io     quay.io/fidencio/nginx                                                                                           0
quay.io     quay.io/libpod/alpine_nginx                                     This image is used in podman e2e tests, and ...  0
quay.io     quay.io/crio/nginx-seccomp                                                                                       0
quay.io     quay.io/giantswarm/ingress-nginx-controller                                                                      0
quay.io     quay.io/openshift-psap-qe/nginx-alpine                                                                           0
>
> # Testando alteração do registrie
> podman image pull nginx:1.26.2-alpine-slim
✔ docker.io/library/nginx:1.26.2-alpine-slim
Trying to pull docker.io/library/nginx:1.26.2-alpine-slim...
Getting image source signatures
Copying blob 43c4264eed91 done
Copying blob 45a30f47e80f done
Copying blob d3b17590914c done
Copying blob 50d6cfdb81c6 done
Copying blob 4c64d3291c88 done
Copying blob 9dc0279166b1 done
Copying blob 6592d833752c done
Copying config b04818d62b done
Writing manifest to image destination
Storing signatures
b04818d62b638d1b65ea9d8df70cf9648668784ef89c6e35e00b04a07e4422bf
> 
> podman images
REPOSITORY                      TAG                 IMAGE ID      CREATED         SIZE
localhost/villanileo/webserver  latest              ca3a00860407  39 minutes ago  259 MB
docker.io/library/nginx         latest              7f553e8bbc89  5 days ago      196 MB
docker.io/library/ubuntu        latest              b1e9cef3f297  5 weeks ago     80.6 MB
docker.io/library/nginx         1.26.2-alpine-slim  b04818d62b63  7 weeks ago     12.6 MB
docker.io/library/hello-world   latest              d2c94e258dcb  17 months ago   28.5 kB
> 
> # Se autenticando num registrie
> podman login
Username: villanileo
Password: 
Error: error logging into "docker.io": invalid username/password
> 
> podman login
Username: villanileo
Password:
Login Succeeded!
>
> # Enviando imagem para o dockerhub
> podman push villanileo/webserver
Getting image source signatures
Copying blob 8d853c8add5d skipped: already exists
Copying blob 756474215d29 skipped: already exists
Copying blob 7619c0ba3c92 skipped: already exists
Copying blob 6b133b4de5e6 skipped: already exists
Copying blob 1c1f11fd65d6 skipped: already exists
Copying blob 3d07a4a7eb2a skipped: already exists
Copying blob a980623c96ea done
Copying blob 931271f68893 done
Copying blob 825fb68b6033 skipped: already exists
Copying config ca3a008604 done
Writing manifest to image destination
Storing signatures
>